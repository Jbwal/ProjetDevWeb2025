<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModifProfil</title>
</head>
<body>

    <a href="/users/logout">Déconnexion</a>
    <h1>Profil de <%= user.login %></h1>

    <form action="/update/<%=user.id%>" method="POST">
        <label for="firstName">Prénom :</label>
        <input type="text" id="firstName" name="firstName" value="<%= user.firstName %>" required>
        <br><br>

        <label for="lastName">Nom :</label>
        <input type="text" id="lastName" name="lastName" value="<%= user.lastName %>" required>
        <br><br>

        <label for="age">Âge :</label>
        <input type="number" id="age" name="age" value="<%= user.age %>" required>
        <br><br>

        <label for="gender">Genre :</label>
        <select id="gender" name="gender" required>
            <option value="Homme" <%= user.gender === 'Homme' ? 'selected' : '' %>>Homme</option>
            <option value="Femme" <%= user.gender === 'Femme' ? 'selected' : '' %>>Femme</option>
            <option value="Autre" <%= user.gender === 'Autre' ? 'selected' : '' %>>Autre</option>
        </select>
        <br><br>

        <label for="birthDate">Date de naissance :</label>
        <input type="date" id="birthDate" name="birthDate" value="<%= new Date(user.birthDate).toISOString().split('T')[0] %>" required>
        <br><br>

        <label for="password">Mot de passe :</label>
        <input type="password" id="password" name="password">
        <br><br>

        <label for="confirmPassword">Confirmer le mot de passe :</label>
        <input type="password" id="confirmPassword" name="confirmPassword">
        <br><br>

        <button type="submit">Enregistrer les modifications</button>
    </form>

    <script>
        document.querySelector('form').addEventListener('submit', function(e) {
            const password = document.getElementById('password').value;
            const confirm = document.getElementById('confirmPassword').value;
        
            if (password !== '') {
                if (password.length < 6) {
                    alert('Le mot de passe doit contenir au moins 6 caractères.');
                    e.preventDefault();
                } else if (confirm === '') {
                    alert('Veuillez confirmer votre nouveau mot de passe.');
                    e.preventDefault();
                } else if (password !== confirm) {
                    alert('Les mots de passe ne correspondent pas.');
                    e.preventDefault();
                }
            }
        });
        </script>
        
        

</body>
</html>
